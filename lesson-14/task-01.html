<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../reset.css">
    <link rel="stylesheet" href="../style.css">
	<title>Home-task 1</title>
</head>
<body>
    <header class="header">
        <div class="container">
            <h2 class="header__title">Бабалик Олександр</h2>
            <h1 class="header__sabtitle">Курс з вивчення JavaScript | Урок 14 | Об'єкти</h1>
        </div>
    </header>
	<div class="container">
        <div class="home-task">
            <a class="home-link"  href="lesson14.html" class="home-task__link-back">Назад</a>
            <h2 class="home-task__title">Задача 1</h2>
            <div class="home-task__description">
                <p class="home-task__subtitle">Описати масив об’єктів – сайтів розроблених компанією з такими властивостями
                    ----- Властивості ------
                    -	назва компанії на час розробки (назву періодично змінюють)
                    -	власник компанії
                    -	споснсори (масив спонсорів)
                                 * прізвище спонсора
                          * ім’я  спонсора
                          * сума вкладень спонсора
                    -	рік випуску
                    -	вартість сайту
                    Знайти:
                    1) загальну вартість усіх сайтів
                    2) кількість сайтів, що було зроблено між 2000 та 2009 рр.
                    3) кількість сайтів, де сума спонсорських вкладень була більшою за 100000
                    4) створити загальний список усіх спонсорів (поки можуть повторюватись, просто зібрати усі у масив)
                    5) знайти рік, коли прибуток був найбільшим
                    6) упорядкувати список за спаданням прибутку
                    7) Створити 2 окремих списки з копіями об’єктів, що містять сайти з вартість до 10000 і більше 10000
                </p>
            </div>
        </div>
    </div>

    <div class="script" style="text-align: center;">
        <script>
            // -----------  dataList  -------
            let sitesList = [
                {
                    companyName: 'company1',
                    companyOwner: 'owner1',
                    companySponsors: [
                        {
                            sponsorName: 'name1',
                            sponsorSurname: 'surname1',
                            investitionOfSponsor: 15000,
                        },
                        {
                            sponsorName: 'name2',
                            sponsorSurname: 'surname2',
                            investitionOfSponsor: 5000,
                        },
                        {
                            sponsorName: 'name3',
                            sponsorSurname: 'surname3',
                            investitionOfSponsor: 12000,
                        },
                        {
                            sponsorName: 'name4',
                            sponsorSurname: 'surname4',
                            investitionOfSponsor: 7000,
                        }
                    ],
                    year: 2002,
                    siteCost: 24000,
                },
                {
                    companyName: 'company1',
                    companyOwner: 'owner1',
                    companySponsors: [
                        {
                            sponsorName: 'name1',
                            sponsorSurname: 'surname1',
                            investitionOfSponsor: 21000,
                        },
                        {
                            sponsorName: 'name2',
                            sponsorSurname: 'surname2',
                            investitionOfSponsor: 18000,
                        },
                        {
                            sponsorName:'name3',
                            sponsorSurname: 'surname3',
                            investitionOfSponsor: 10000,
                        },
                        {
                            sponsorName: 'name4',
                            sponsorSurname: 'surname4',
                            investitionOfSponsor: 12000,
                        }
                    ],
                    year: 2004,
                    siteCost: 42000,
                },
                {
                    companyName: 'company1',  
                    companyOwner: 'owner1',
                    companySponsors: [
                        {
                            sponsorName: 'name1',
                            sponsorSurname: 'surname1',
                            investitionOfSponsor: 8000,
                        },
                        {
                            sponsorName: 'name2',
                            sponsorSurname: 'surname2',
                            investitionOfSponsor: 2000,
                        },
                        {
                            sponsorName: 'name3',
                            sponsorSurname: 'surname3',
                            investitionOfSponsor: 2000,
                        }
                    ],
                    year: 2005,
                    siteCost: 6000,
                },
                {
                    companyName: 'company2',  
                    companyOwner: 'owner2',
                    companySponsors: [
                        {
                            sponsorName: 'name1',
                            sponsorSurname: 'surname1',
                            investitionOfSponsor: 10000,
                        },
                        {
                            sponsorName: 'name2',
                            sponsorSurname: 'surname2',
                            investitionOfSponsor: 25000,
                        },
                        {
                            sponsorName: 'name3',
                            sponsorSurname: 'surname3',
                            investitionOfSponsor: 32000,
                        },
                        {
                            sponsorName: 'name4',
                            sponsorSurname: 'surname4',
                            investitionOfSponsor: 17000,
                        }
                    ],
                    year: 2010,
                    siteCost: 49000,
                },
                {
                    companyName: 'company2', 
                    companyOwner: 'owner2',
                    companySponsors: [
                        {
                            sponsorName: 'name1',
                            sponsorSurname: 'surname1',
                            investitionOfSponsor: 25000,
                        },
                        {
                            sponsorName: 'name2',
                            sponsorSurname: 'surname2',
                            investitionOfSponsor: 38000,
                        },
                        {
                            sponsorName: 'name3',
                            sponsorSurname: 'surname3',
                            investitionOfSponsor: 43000,
                        }
                    ],
                    year: 2014,
                    siteCost: 64000,
                }
            ]
            
            //  --------------------------  Функції ----------------------------------------

            //  ------  Загальну вартість усіх сайтів  ---------
            function getTotalCostSites(sitesList) {
                let totalCostSites = sitesList.reduce((prevTotalCost, site) => prevTotalCost + site.siteCost ,0)
                return totalCostSites
            }
            
             //  ------  Кількість сайтів, що було зроблено між 2000 та 2009 рр  ---------
            function getSitesCountCreatedBetweenOf2000And2009(sitesList) {
                let sitesCountCreatedBetweenOf2000And2009 = 0
                for (let i = 0; i < sitesList.length; i++) {
                    if (sitesList[i].year >= 2000 && sitesList[i].year <= 2009) sitesCountCreatedBetweenOf2000And2009++                
                }
                return sitesCountCreatedBetweenOf2000And2009
            }

            //  ------  Кількість сайтів, де сума спонсорських вкладень була більшою за 100000  -------                
            function getSitesCountWithInvestitionsMore100000(sitesList) {
                let sitesCountWithInvestitionsMore100000  = 0
                for (let i = 0; i < sitesList.length; i++) {
                    let investitionSumOfSite = 0
                    for (let j = 0; j < sitesList[i].companySponsors.length; j++) {
                        investitionSumOfSite += sitesList[i].companySponsors[j].investitionOfSponsor
                    }
                    if (investitionSumOfSite > 100000) sitesCountWithInvestitionsMore100000++
                }
                return sitesCountWithInvestitionsMore100000
            }

            //  ------  Список усіх спонсорів (споснори можуть повторюватись)  -------
            function getListNamesOfSponsors(sitesList) {
                let listNamesOfSponsors = []
                for (let i = 0; i < sitesList.length; i++) {
                    for (let j = 0; j < sitesList[i].companySponsors.length; j++) {
                        listNamesOfSponsors.push(sitesList[i].companySponsors[j].sponsorName)
                    }
                }
                return listNamesOfSponsors
            }

            //  ------ Знайти рік, коли прибуток був найбільшим  -------    
            function getYearWihtBigestProfit(sitesList) {
                let yearWihtBigestProfit = 0
                let bigestProfitPerYaer = -Infinity
                for (const site of sitesList) {
                    if (site.siteCost > bigestProfitPerYaer) {
                        bigestProfitPerYaer = site.siteCost
                        yearWihtBigestProfit = site.year
                    }
                }
                return yearWihtBigestProfit
            }

            //  ------  Упорядкувати список за спаданням прибутку  -------            
            function getSortSiteListByDescendingOfProfit(sitesList) {
                let copySitesList = JSON.parse(JSON.stringify(sitesList))
                copySitesList.sort((site1, site2) => site2.siteCost - site1.siteCost)
                return copySitesList
            }
            
            // ------  Створити 2 окремих списки з копіями об’єктів, що містять сайти з вартість до 10000 і більше 10000 -------
            function getSplitSitesList(sitesList, frontCost = 10000) {
                let sitesListWithCostLess10000 = []
                let sitesListWithCostMore10000 = []
                for (const site of sitesList) {
                    if (site.siteCost <= frontCost) sitesListWithCostLess10000.push(JSON.parse(JSON.stringify(site)))
                    else if (site.siteCost > frontCost) sitesListWithCostMore10000.push(JSON.parse(JSON.stringify(site)))
                }
                return [sitesListWithCostLess10000, sitesListWithCostMore10000]
            }
                
            //   -----   Виклик функцій  -------
            
            //  Загальну вартість усіх сайтів
            let totalCostSites = getTotalCostSites(sitesList)

            //  Кількість сайтів, що було зроблено між 2000 та 2009 рр
            let sitesCountCreatedBetweenOf2000And2009 = getSitesCountCreatedBetweenOf2000And2009(sitesList)
            
            //  Кількість сайтів, де сума спонсорських вкладень була більшою за 100000
            let sitesCountWithInvestitionsMore100000  = getSitesCountWithInvestitionsMore100000(sitesList)

            //  Список усіх спонсорів (споснори можуть повторюватись)
            let listNamesOfSponsors = getListNamesOfSponsors(sitesList)

            //  Знайти рік, коли прибуток був найбільшим
            let yearWihtBigestProfit = getYearWihtBigestProfit(sitesList)

            //  Упорядкувати список за спаданням прибутку 
            let sortSiteListByDescendingOfProfit = getSortSiteListByDescendingOfProfit(sitesList)
            
            //  Створити 2 окремих списки з копіями об’єктів, що містять сайти з вартість до 10000 і більше 10000
            let splitSitesList = getSplitSitesList(sitesList)

            

            document.write(`
            Загальну вартість усіх сайтів - ${totalCostSites}<br><br>
            Кількість сайтів, що було зроблено між 2000 та 2009 рр - ${sitesCountCreatedBetweenOf2000And2009}<br><br>
            Кількість сайтів, де сума спонсорських вкладень була більшою за 100000 - ${sitesCountWithInvestitionsMore100000}<br><br>
            Список усіх спонсорів (споснори можуть повторюватись) - ${listNamesOfSponsors}<br><br>
            Знайти рік, коли прибуток був найбільшим - ${yearWihtBigestProfit}<br><br>
            Упорядкувати список за спаданням прибутку - ${JSON.stringify(sortSiteListByDescendingOfProfit)}<br><br>
            Список сайтів з вартістю до 10000 - ${JSON.stringify(splitSitesList[0])}<br><br>
            Список сайтів з вартістю більше 10000 - ${JSON.stringify(splitSitesList[1])}
            `)
            console.log(sortSiteListByDescendingOfProfit)
            
        </script>
    </div>
</body>
</html>